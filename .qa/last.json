{
  "startedAt": "2025-08-18T16:31:31.391Z",
  "finishedAt": "2025-08-18T16:31:38.650Z",
  "ok": false,
  "results": [
    {
      "name": "typecheck",
      "passed": true,
      "exitCode": 0,
      "durationMs": 2779,
      "output": "\n> typecheck\n> turbo run typecheck\n\n• Packages in scope: @flowpuppy/database, @flowpuppy/shared, @flowpuppy/web\n• Running typecheck in 3 packages\n• Remote caching disabled\n@flowpuppy/shared:typecheck: cache hit, replaying logs 03caa7e49c88ba36\n@flowpuppy/shared:typecheck: \n@flowpuppy/shared:typecheck: > @flowpuppy/shared@0.1.0 typecheck\n@flowpuppy/shared:typecheck: > tsc -p tsconfig.json --noEmit\n@flowpuppy/shared:typecheck: \n@flowpuppy/web:typecheck: cache miss, executing 072a6b47efe2751e\n@flowpuppy/database:typecheck: cache hit, replaying logs 3a9b9b6f45b0f94d\n@flowpuppy/database:typecheck: \n@flowpuppy/database:typecheck: > @flowpuppy/database@0.1.0 typecheck\n@flowpuppy/database:typecheck: > tsc -p tsconfig.json --noEmit\n@flowpuppy/database:typecheck: \n@flowpuppy/web:typecheck: \n@flowpuppy/web:typecheck: > @flowpuppy/web@0.1.0 typecheck\n@flowpuppy/web:typecheck: > tsc -p tsconfig.json --noEmit\n@flowpuppy/web:typecheck: \n\n Tasks:    3 successful, 3 total\nCached:    2 cached, 3 total\n  Time:    1.623s \n\nturbo 2.5.5\n"
    },
    {
      "name": "unit",
      "passed": false,
      "exitCode": 1,
      "durationMs": 4479,
      "output": "\n> test\n> turbo run test\n\n• Packages in scope: @flowpuppy/database, @flowpuppy/shared, @flowpuppy/web\n• Running test in 3 packages\n• Remote caching disabled\n@flowpuppy/web:test: cache miss, executing 9cbfbf61ceadf0d5\n@flowpuppy/database:test: cache hit, replaying logs af76bd30ecd2671f\n@flowpuppy/shared:test: cache hit, replaying logs 6d9297fef388d44d\n@flowpuppy/database:test: \n@flowpuppy/database:test: > @flowpuppy/database@0.1.0 test\n@flowpuppy/database:test: > echo 'no tests yet'\n@flowpuppy/database:test: \n@flowpuppy/database:test: no tests yet\n@flowpuppy/shared:test: \n@flowpuppy/shared:test: > @flowpuppy/shared@0.1.0 test\n@flowpuppy/shared:test: > echo 'no tests yet'\n@flowpuppy/shared:test: \n@flowpuppy/shared:test: no tests yet\n@flowpuppy/web:test: \n@flowpuppy/web:test: > @flowpuppy/web@0.1.0 test\n@flowpuppy/web:test: > vitest run -c vitest.config.ts\n@flowpuppy/web:test: \n@flowpuppy/web:test: The CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.\n@flowpuppy/web:test: \n@flowpuppy/web:test:  RUN  v1.6.1 /Users/jawad/Documents/Flowpuppyv4/apps/web\n@flowpuppy/web:test: \n@flowpuppy/web:test:  ✓ src/lib/dsl.test.ts  (2 tests) 6ms\n@flowpuppy/web:test:  ✓ src/lib/agentSpec/adapter.test.ts  (2 tests) 5ms\n@flowpuppy/web:test:  ✓ src/lib/validation.test.ts  (3 tests) 4ms\n@flowpuppy/web:test:  ✓ src/lib/executor.trycatch.test.ts  (1 test) 7ms\n@flowpuppy/web:test:  ✓ src/lib/flowdoc/schema.test.ts  (4 tests) 8ms\n@flowpuppy/web:test:  ✓ src/lib/executor.httpguard.test.ts  (3 tests) 13ms\n@flowpuppy/web:test:  ✓ src/lib/planner.test.ts  (4 tests) 44ms\n@flowpuppy/web:test:  ❯ src/app/api/agent/__tests__/agent-api.test.ts  (3 tests | 3 failed) 29ms\n@flowpuppy/web:test:    ❯ src/app/api/agent/__tests__/agent-api.test.ts > agent api > plan returns plan with nodeIds and validates DSL\n@flowpuppy/web:test:      → expected false to be true // Object.is equality\n@flowpuppy/web:test:    ❯ src/app/api/agent/__tests__/agent-api.test.ts > agent api > confirm validates and returns AgentSpec\n@flowpuppy/web:test:      → expected false to be true // Object.is equality\n@flowpuppy/web:test:    ❯ src/app/api/agent/__tests__/agent-api.test.ts > agent api > generate validates AgentSpec and returns FlowDoc v1.1\n@flowpuppy/web:test:      → expected false to be true // Object.is equality\n@flowpuppy/web:test:  ✓ src/lib/executor.test.ts  (2 tests) 209ms\n@flowpuppy/web:test:  ✓ src/lib/providers.test.ts  (2 tests) 4ms\n@flowpuppy/web:test:  ✓ src/lib/executor.transform.test.ts  (1 test) 4ms\n@flowpuppy/web:test:  ✓ src/lib/redact.test.ts  (2 tests) 3ms\n@flowpuppy/web:test:  ✓ src/lib/flowdoc/adapter.test.ts  (1 test) 6ms\n@flowpuppy/web:test:  ✓ src/lib/universalDsl.test.ts  (1 test) 12ms\n@flowpuppy/web:test: \n@flowpuppy/web:test: ⎯⎯⎯⎯⎯⎯⎯ Failed Tests 3 ⎯⎯⎯⎯⎯⎯⎯\n@flowpuppy/web:test: \n@flowpuppy/web:test:  FAIL  src/app/api/agent/__tests__/agent-api.test.ts > agent api > plan returns plan with nodeIds and validates DSL\n@flowpuppy/web:test: AssertionError: expected false to be true // Object.is equality\n@flowpuppy/web:test: \n@flowpuppy/web:test: - Expected\n@flowpuppy/web:test: + Received\n@flowpuppy/web:test: \n@flowpuppy/web:test: - true\n@flowpuppy/web:test: + false\n@flowpuppy/web:test: \n@flowpuppy/web:test:  ❯ src/app/api/agent/__tests__/agent-api.test.ts:13:20\n@flowpuppy/web:test:      11|   it('plan returns plan with nodeIds and validates DSL', async () => {\n@flowpuppy/web:test:      12|     const res = await PLAN(makeReq({ prompt: 'energy optimizer hourly …\n@flowpuppy/web:test:      13|     expect(res.ok).toBe(true)\n@flowpuppy/web:test:        |                    ^\n@flowpuppy/web:test:      14|     const j: any = await res.json()\n@flowpuppy/web:test:      15|     expect(Array.isArray(j?.options?.plan)).toBe(true)\n@flowpuppy/web:test: \n@flowpuppy/web:test: ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/3]⎯\n@flowpuppy/web:test: \n@flowpuppy/web:test:  FAIL  src/app/api/agent/__tests__/agent-api.test.ts > agent api > confirm validates and returns AgentSpec\n@flowpuppy/web:test: AssertionError: expected false to be true // Object.is equality\n@flowpuppy/web:test: \n@flowpuppy/web:test: - Expected\n@flowpuppy/web:test: + Received\n@flowpuppy/web:test: \n@flowpuppy/web:test: - true\n@flowpuppy/web:test: + false\n@flowpuppy/web:test: \n@flowpuppy/web:test:  ❯ src/app/api/agent/__tests__/agent-api.test.ts:23:20\n@flowpuppy/web:test:      21|   it('confirm validates and returns AgentSpec', async () => {\n@flowpuppy/web:test:      22|     const res = await CONFIRM(makeReq({ selections: { schedule: { type…\n@flowpuppy/web:test:      23|     expect(res.ok).toBe(true)\n@flowpuppy/web:test:        |                    ^\n@flowpuppy/web:test:      24|     const j: any = await res.json()\n@flowpuppy/web:test:      25|     expect(j?.agentSpec?.name).toBeTypeOf('string')\n@flowpuppy/web:test: \n@flowpuppy/web:test: ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/3]⎯\n@flowpuppy/web:test: \n@flowpuppy/web:test:  FAIL  src/app/api/agent/__tests__/agent-api.test.ts > agent api > generate validates AgentSpec and returns FlowDoc v1.1\n@flowpuppy/web:test: AssertionError: expected false to be true // Object.is equality\n@flowpuppy/web:test: \n@flowpuppy/web:test: - Expected\n@flowpuppy/web:test: + Received\n@flowpuppy/web:test: \n@flowpuppy/web:test: - true\n@flowpuppy/web:test: + false\n@flowpuppy/web:test: \n@flowpuppy/web:test:  ❯ src/app/api/agent/__tests__/agent-api.test.ts:31:20\n@flowpuppy/web:test:      29|     const spec = { name: 'Energy', inputs: { schedule: { type: 'interv…\n@flowpuppy/web:test:      30|     const res = await GENERATE(makeReq({ agentSpec: spec }))\n@flowpuppy/web:test:      31|     expect(res.ok).toBe(true)\n@flowpuppy/web:test:        |                    ^\n@flowpuppy/web:test:      32|     const j: any = await res.json()\n@flowpuppy/web:test:      33|     expect(j?.flowDoc?.version).toBe('1.1')\n@flowpuppy/web:test: \n@flowpuppy/web:test: ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/3]⎯\n@flowpuppy/web:test: \n@flowpuppy/web:test:  Test Files  1 failed | 13 passed (14)\n@flowpuppy/web:test:       Tests  3 failed | 28 passed (31)\n@flowpuppy/web:test:    Start at  20:31:35\n@flowpuppy/web:test:    Duration  2.66s (transform 857ms, setup 3ms, collect 2.29s, tests 354ms, environment 10.17s, prepare 2.41s)\n@flowpuppy/web:test: \n@flowpuppy/web:test: npm error Lifecycle script `test` failed with error:\n@flowpuppy/web:test: npm error code 1\n@flowpuppy/web:test: npm error path /Users/jawad/Documents/Flowpuppyv4/apps/web\n@flowpuppy/web:test: npm error workspace @flowpuppy/web@0.1.0\n@flowpuppy/web:test: npm error location /Users/jawad/Documents/Flowpuppyv4/apps/web\n@flowpuppy/web:test: npm error command failed\n@flowpuppy/web:test: npm error command sh -c vitest run -c vitest.config.ts\n\n Tasks:    2 successful, 3 total\nCached:    2 cached, 3 total\n  Time:    3.24s \nFailed:    @flowpuppy/web#test\n\nturbo 2.5.5\n\n@flowpuppy/web:test: ERROR: command finished with error: command (/Users/jawad/Documents/Flowpuppyv4/apps/web) /usr/local/bin/npm run test exited (1)\n@flowpuppy/web#test: command (/Users/jawad/Documents/Flowpuppyv4/apps/web) /usr/local/bin/npm run test exited (1)\n ERROR  run failed: command  exited (1)"
    }
  ]
}